<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Week 10 - Quiz & Practice</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: white;
            min-height: 100vh;
            padding: 20px;
        }

        /* Mobile First - Base styles for smallest screens */
        @media (max-width: 480px) {
            body {
                padding: 10px;
            }
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: #ffffff;
            padding: 40px;
            border-radius: 8px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
        }

        /* Tablet and smaller */
        @media (max-width: 768px) {
            .container {
                padding: 25px;
                box-shadow: 0 5px 20px rgba(0, 0, 0, 0.15);
            }
        }

        /* Mobile */
        @media (max-width: 480px) {
            .container {
                padding: 15px;
                border-radius: 6px;
            }
        }

        /* Logo Section */
        .logo-header {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .logo-container {
            width: 120px;
            height: 120px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .logo-container img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        @media (max-width: 768px) {
            .logo-container {
                width: 100px;
                height: 100px;
            }
        }

        @media (max-width: 480px) {
            .logo-container {
                width: 80px;
                height: 80px;
            }
        }

        .header-content {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .books-icon {
            font-size: 2em;
        }

        @media (max-width: 480px) {
            .books-icon {
                font-size: 1.5em;
            }
        }

        h1 {
            color: #2c3e50;
            text-align: center;
            font-size: 2.2em;
            font-weight: 700;
            letter-spacing: -0.5px;
            margin: 0;
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 1.8em;
            }
        }

        @media (max-width: 480px) {
            h1 {
                font-size: 1.4em;
            }
        }

        .accordion-item {
            background: #ffffff;
            border-radius: 6px;
            margin-bottom: 20px;
            border: 1px solid #d1d5db;
            overflow: hidden;
        }

        .accordion-header {
            padding: 18px 24px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            color: #ffffff;
            font-size: 1.1em;
            font-weight: 600;
            transition: all 0.3s;
            border-bottom: 2px solid #667eea;
        }

        @media (max-width: 768px) {
            .accordion-header {
                padding: 15px 18px;
                font-size: 1em;
            }
        }

        @media (max-width: 480px) {
            .accordion-header {
                padding: 12px 15px;
                font-size: 0.9em;
            }
        }

        .accordion-header:hover {
            background: linear-gradient(90deg, #5568d3 0%, #6a3a8f 100%);
            transform: translateX(5px);
        }

        .accordion-arrow {
            font-size: 1.2em;
            transition: transform 0.3s;
        }

        .accordion-arrow.active {
            transform: rotate(180deg);
        }

        .accordion-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
            padding: 0 25px;
        }

        .accordion-content.active {
            max-height: 10000px;
            padding: 25px;
        }

        .quiz-question {
            background: #f8f9fa;
            padding: 24px;
            border-radius: 6px;
            margin-bottom: 24px;
            border-left: 4px solid #667eea;
        }

        .question-text {
            font-size: 1.05em;
            margin-bottom: 16px;
            font-weight: 600;
            color: #2c3e50;
            line-height: 1.6;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .option {
            padding: 14px 18px;
            background: white;
            border: 2px solid #d1d5db;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.2s;
            color: #374151;
            font-size: 0.95em;
            font-weight: 500;
            user-select: none;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
        }

        @media (max-width: 480px) {
            .option {
                padding: 12px 14px;
                font-size: 0.88em;
            }
        }

        .option:hover {
            border-color: #667eea;
            background: #f0f4ff;
            transform: translateX(4px);
        }

        .option.selected {
            border-color: #667eea;
            background: #667eea;
            color: white;
        }

        .option.correct {
            border-color: #10b981;
            background: #10b981;
            color: white;
        }

        .option.wrong {
            border-color: #ef4444;
            background: #ef4444;
            color: white;
        }

        .button-group {
            display: flex;
            gap: 12px;
            margin-top: 24px;
            flex-wrap: wrap;
        }

        @media (max-width: 480px) {
            .button-group {
                gap: 8px;
                margin-top: 16px;
            }
        }

        .submit-btn, .random-btn, .restart-btn {
            padding: 14px 32px;
            border: none;
            border-radius: 4px;
            font-size: 1em;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
            flex: 1;
            min-width: 140px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        @media (max-width: 768px) {
            .submit-btn, .random-btn, .restart-btn {
                min-width: 120px;
                padding: 12px 24px;
                font-size: 0.9em;
            }
        }

        @media (max-width: 480px) {
            .submit-btn, .random-btn, .restart-btn {
                min-width: 100%;
                padding: 12px 20px;
                font-size: 0.85em;
                letter-spacing: 0.3px;
            }
        }

        .submit-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .submit-btn:hover {
            background: linear-gradient(135deg, #5568d3 0%, #6a3a8f 100%);
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.4);
            transform: translateY(-2px);
        }

        .submit-btn:disabled {
            background: #d1d5db;
            cursor: not-allowed;
        }

        .random-btn {
            background: #f59e0b;
            color: white;
        }

        .random-btn:hover {
            background: #d97706;
            box-shadow: 0 5px 20px rgba(245, 158, 11, 0.4);
            transform: translateY(-2px);
        }

        .restart-btn {
            background: #ef4444;
            color: white;
        }

        .restart-btn:hover {
            background: #dc2626;
            box-shadow: 0 5px 20px rgba(239, 68, 68, 0.4);
            transform: translateY(-2px);
        }

        .score-display {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            padding: 20px;
            border-radius: 6px;
            text-align: center;
            font-size: 1.2em;
            margin-top: 20px;
            display: none;
            font-weight: 600;
            box-shadow: 0 5px 20px rgba(16, 185, 129, 0.3);
        }

        .lecture-select {
            width: 100%;
            padding: 12px;
            border: 2px solid #d1d5db;
            border-radius: 4px;
            font-size: 1em;
            background: white;
            margin-bottom: 20px;
            color: #374151;
            font-weight: 500;
            transition: all 0.3s;
        }

        .lecture-select:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .back-btn {
            background: #e5e7eb;
            color: #374151;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin-bottom: 24px;
            font-size: 0.95em;
            font-weight: 600;
            transition: all 0.3s;
        }

        .back-btn:hover {
            background: #d1d5db;
            transform: translateX(-4px);
        }

        .select-label {
            font-weight: 600;
            color: #2c3e50;
            display: block;
            margin-bottom: 10px;
        }

        .pdf-viewer {
            width: 100%;
            height: 600px;
            border: 2px solid #d1d5db;
            border-radius: 6px;
        }

        @media (max-width: 768px) {
            .pdf-viewer {
                height: 500px;
            }
        }

        @media (max-width: 480px) {
            .pdf-viewer {
                height: 400px;
            }
        }

        .pdf-fullscreen-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 12px 24px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.95em;
            font-weight: 600;
            transition: all 0.3s;
            margin-bottom: 15px;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .pdf-fullscreen-btn:hover {
            background: linear-gradient(135deg, #5568d3 0%, #6a3a8f 100%);
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.4);
            transform: translateY(-2px);
        }
    </style>
    <link rel="icon" href="logo.png" type="image/png">
</head>
<body>
    <div class="container">
        <!-- Logo and Header Section -->
        <div class="logo-header">
            <div class="logo-container">
                <img src="logo.png" alt="EXTRA - Learn Deeply, Grow more, Excel!">
            </div>
            <div class="header-content">
                <span class="books-icon">📚</span>
                <h1>Week 10 - Learning Materials</h1>
            </div>
        </div>

        <!-- Extra Questions Section -->
        <div class="accordion-item">
            <div class="accordion-header" onclick="toggleAccordion(this)">
                <span>💡 Extra Questions</span>
                <span class="accordion-arrow">▼</span>
            </div>
            <div class="accordion-content">
                <div id="extraQuiz"></div>
                <div class="button-group">
                    <button class="submit-btn" onclick="submitQuiz('extra')">Submit Quiz</button>
                    <button class="random-btn" onclick="randomizeQuiz('extra')">Shuffle Order</button>
                    <button class="restart-btn" onclick="restartQuiz('extra')">Restart</button>
                </div>
                <div id="extraScore" class="score-display"></div>
            </div>
        </div>

        <!-- AI Generate Questions Section -->
        <div class="accordion-item">
            <div class="accordion-header" onclick="toggleAccordion(this)">
                <span>🤖 AI Generate Questions</span>
                <span class="accordion-arrow">▼</span>
            </div>
            <div class="accordion-content">
                <label class="select-label">Select Lecture:</label>
                <select id="lectureSelect" class="lecture-select" onchange="loadLectureQuiz()">
                    <option value="">-- Choose a Lecture --</option>
                    <option value="lecture1">Lecture 28 - Land Resources and Agriculture</option>
                    <option value="lecture2">Lecture 29 - Water Resources</option>
                    <option value="lecture3">Lecture 30 - Mineral and Energy Resources</option>
                </select>
                <div id="aiQuiz"></div>
                <div class="button-group" style="display: none;" id="aiButtonGroup">
                    <button class="submit-btn" onclick="submitQuiz('ai')">Submit Quiz</button>
                    <button class="random-btn" onclick="randomizeQuiz('ai')">Shuffle Order</button>
                    <button class="restart-btn" onclick="restartQuiz('ai')">Restart</button>
                </div>
                <div id="aiScore" class="score-display"></div>
            </div>
        </div>

        <!-- Week  Assignment Section -->
        <div class="accordion-item">
            <div class="accordion-header" onclick="toggleAccordion(this)">
                <span>📝 Week 10 - Assignment Quiz</span>
                <span class="accordion-arrow">▼</span>
            </div>
            <div class="accordion-content">
                <div id="weekQuiz"></div>
                <div class="button-group">
                    <button class="submit-btn" onclick="submitQuiz('week')">Submit Quiz</button>
                    <button class="random-btn" onclick="randomizeQuiz('week')">Shuffle Order</button>
                    <button class="restart-btn" onclick="restartQuiz('week')">Restart</button>
                </div>
                <div id="weekScore" class="score-display"></div>
            </div>
        </div>

        <!-- PDF Solution Section -->
        <div class="accordion-item">
            <div class="accordion-header" onclick="toggleAccordion(this)">
                <span>📄 PDF (Solution)</span>
                <span class="accordion-arrow">▼</span>
            </div>
            <div class="accordion-content">
                <button class="pdf-fullscreen-btn" onclick="openPDFFullscreen()">
                    📄 Open PDF in Full Page
                </button>
                <iframe id="pdfViewer" class="pdf-viewer" src="week10.pdf"></iframe>
                <p style="margin-top: 15px; color: #6b7280; font-style: italic;">
                    Week 10 Solution 
                </p>
            </div>
        </div>
    </div>

    <script>
         // Extra Questions Data
        const extraQuizData = [
            {
                question: "Which of these is the largest source of sulphur oxides in the atmosphere?",
                options: [
                    "electricity generation",
                    "mobile sources",
                    "industrial processes",
                    "residential fuel"
                ],
                correctAnswer: "electricity generation"
            },
            {
                question: "those resources that are currently being used after surveying, quantification and qualification is a definition of",
                options: [
                    "potential resources",
                    "actual resources",
                    "reserve resources",
                    "stock resources"
                ],
                correctAnswer: "actual resources"
            },
            {
                question: "Rain gardens are primarily meant to",
                options: [
                    "reduce water usage",
                    "increase recharge to groundwater",
                    "protect existing water sources",
                    "increase water flow to streams"
                ],
                correctAnswer: "increase recharge to groundwater"
            },
            {
                question: "those resources that have been surveyed but we lack the technology to use them is a definition of",
                options: [
                    "potential resources",
                    "actual resources",
                    "reserve resources",
                    "stock resources"
                ],
                correctAnswer: "stock resources"
            }
        ];

        // Week 10 Assignment Data
        const weekQuizData = [
            {
                question: "Hydrogen for nuclear fusion comes under the category of",
                options: [
                    "potential resources",
                    "actual resources",
                    "reserve resources",
                    "stock resources"
                ],
                correctAnswer: "stock resources"
            },
            {
                question: "Which of these is the largest source of ammonia (NH3) in the atmosphere?",
                options: [
                    "animal manure",
                    "mineral fertiliser",
                    "crops and their decomposition",
                    "human waste"
                ],
                correctAnswer: "animal manure"
            },
            {
                question: "the part of actual resources that can be developed profitably in the future is a definition of",
                options: [
                    "potential resources",
                    "actual resources",
                    "reserve resources",
                    "stock resources"
                ],
                correctAnswer: "reserve resources"
            },
            {
                question: "Timber from forests that is being harvested can be categorised under",
                options: [
                    "potential resources",
                    "actual resources",
                    "reserve resources",
                    "stock resources"
                ],
                correctAnswer: "actual resources"
            },
            {
                question: "Rain gardens are primarily meant to",
                options: [
                    "reduce water usage",
                    "increase recharge to groundwater",
                    "protect existing water sources",
                    "increase water flow to streams"
                ],
                correctAnswer: "increase recharge to groundwater"
            },
            {
                question: "Oil that has not been drilled can be categorised under",
                options: [
                    "potential resources",
                    "actual resources",
                    "reserve resources",
                    "stock resources"
                ],
                correctAnswer: "potential resources"
            },
            {
                question: "Which of these is the largest source of nitrogen oxides in the atmosphere?",
                options: [
                    "electricity generation",
                    "mobile sources",
                    "industrial processes",
                    "waste disposal"
                ],
                correctAnswer: "mobile sources"
            },
            {
                question: "Those resources that are currently being used after surveying, quantification and qualification is a definition of",
                options: [
                    "potential resources",
                    "actual resources",
                    "reserve resources",
                    "stock resources"
                ],
                correctAnswer: "actual resources"
            },
            {
                question: "those resources that may be used in the future is a definition of",
                options: [
                    "potential resources",
                    "actual resources",
                    "reserve resources",
                    "stock resources"
                ],
                correctAnswer: "potential resources"
            },
            {
                question: "Low concentration ores come in the category of",
                options: [
                    "potential resources",
                    "actual resources",
                    "reserve resources",
                    "stock resources"
                ],
                correctAnswer: "reserve resources"
            }
        ];
        
// Lecture 28: Land Resources and Agriculture
const lecture1Data= [
  { question: "What is a non-renewable resource?", options: ["Resources that are constantly being replaced by natural processes.", "Resources that once consumed, are not replaced within a human lifespan.", "Resources that are always available regardless of human consumption.", "Resources that are replenished at the same rate they are consumed."], correctAnswer: "Resources that once consumed, are not replaced within a human lifespan." },
  { question: "Which characteristic is required for something to be considered a resource?", options: ["High economic value.", "Scarcity.", "Functionality or utility to humans.", "Biological origin."], correctAnswer: "Functionality or utility to humans." },
  { question: "In the context of the environment, eutrophication is a negative impact resulting from the leaching of which nutrients from agricultural land?", options: ["Sodium and Chloride.", "Carbon and Oxygen.", "Nitrates and Phosphates.", "Potassium and Calcium."], correctAnswer: "Nitrates and Phosphates." },
  { question: "Approximately what percentage of the world's total land area is currently used for agriculture (including both cropland and grazing land)?", options: ["Less than 10%.", "15-25%.", "30-40%.", "More than 50% (around 54%)."], correctAnswer: "More than 50% (around 54%)." },
  { question: "What is the primary definition of Land Degradation?", options: ["The increase in land under forest cover.", "The conversion of agricultural land into urban areas.", "A temporary or permanent decline in the productive capacity of land.", "The process of soil formation from parent rock."], correctAnswer: "A temporary or permanent decline in the productive capacity of land." },
  { question: "The Delhi smog phenomenon is primarily exacerbated during winter months by which meteorological condition that prevents the dispersion of pollutants?", options: ["High wind speed.", "High temperature.", "Temperature Inversion.", "Frequent rainfall."], correctAnswer: "Temperature Inversion." },
  { question: "The problem of nutrient loss from agricultural land primarily involves which mechanism?", options: ["Volatilization of organic matter.", "Leaching and runoff into water bodies.", "Consumption by farm animals.", "Breakdown into base elements."], correctAnswer: "Leaching and runoff into water bodies." },
  { question: "Which form of pollution is specifically linked to the burning of crop stubble during agricultural activities?", options: ["Water pollution only.", "Land pollution only.", "Air pollution (particulate matter and gases).", "Noise pollution."], correctAnswer: "Air pollution (particulate matter and gases)." },
  { question: "Which process is responsible for the physical breakdown of soil particles and topsoil loss, often accelerated by water or wind?", options: ["Sedimentation.", "Erosion.", "Desertification.", "Afforestation."], correctAnswer: "Erosion." },
  { question: "Which is an example of soil salinization?", options: ["The soil becoming too acidic for plant growth.", "The accumulation of sand dunes on the surface.", "The accumulation of excess salts in the soil.", "The soil structure becoming too loose."], correctAnswer: "The accumulation of excess salts in the soil." },
  { question: "According to the lecture, the peak concentration of Sulfur Dioxide (SO2) observed in Delhi around the end of October/beginning of November is largely attributable to:", options: ["Power plants.", "Vehicular emissions.", "Burning of firecrackers during the Diwali festival.", "Dust storms from deserts."], correctAnswer: "Burning of firecrackers during the Diwali festival." },
  { question: "Resources are defined as sources of supply, support, or aid that can be readily drawn upon when needed. This implies that:", options: ["They must be non-renewable.", "They must be exclusively natural.", "They must be accessible and usable.", "They must be located far from human settlements."], correctAnswer: "They must be accessible and usable." },
  { question: "Deforestation often leads to land degradation by causing:", options: ["Increased groundwater recharge.", "Increased soil erosion and reduced soil fertility.", "An expansion of wetlands.", "A higher rate of biological productivity."], correctAnswer: "Increased soil erosion and reduced soil fertility." },
  { question: "Which definition best describes Natural Resources?", options: ["Resources created and maintained only by human efforts.", "Resources that are naturally occurring but do not have utility.", "Resources that exist independently of human actions.", "Resources that are exclusively biological in origin."], correctAnswer: "Resources that exist independently of human actions." },
  { question: "Which agricultural practice is a major contributor to soil degradation?", options: ["Crop rotation.", "Fallowing.", "Monoculture (growing only one crop repeatedly).", "Use of organic fertilizer."], correctAnswer: "Monoculture (growing only one crop repeatedly)." }
];

// Lecture 29: Water Resources
const lecture2Data = [
  { question: "Approximately what percentage of the Earth's total water is contained in ice and snow (glaciers, ice caps)?", options: ["0.68%", "97.25%", "2.05%", "0.01%"], correctAnswer: "2.05%" },
  { question: "After oceans, ice, and snow, the next largest reservoir of water on Earth is:", options: ["Lakes.", "Groundwater (0.68%).", "Rivers and streams.", "The atmosphere."], correctAnswer: "Groundwater (0.68%)." },
  { question: "The term 'water scarcity' is defined as having access to less than how many cubic meters of water per person per year?", options: ["100 cubic meters.", "500 cubic meters.", "1,000 cubic meters.", "2,500 cubic meters."], correctAnswer: "1,000 cubic meters." },
  { question: "Point sources of water pollution are characterized by pollutants entering the water body:", options: ["Over a large, diffuse area.", "From a single, identifiable location (e.g., a pipe).", "Only during rainfall events.", "Exclusively through agricultural runoff."], correctAnswer: "From a single, identifiable location (e.g., a pipe)." },
  { question: "Which water conservation technique is a major benefit of constructing a check dam on a stream or river?", options: ["It allows fish to migrate upstream more easily.", "It increases the speed of water flow downstream.", "It slows down the water and increases the time for groundwater recharge and prevents soil erosion.", "It is primarily used for large-scale hydroelectric power generation."], correctAnswer: "It slows down the water and increases the time for groundwater recharge and prevents soil erosion." },
  { question: "A Rain Garden treats household wastewater (black water) so that the organic matter becomes:", options: ["Toxic chemicals.", "Pure water vapor.", "Humus in the soil.", "Dissolved minerals."], correctAnswer: "Humus in the soil." },
  { question: "The largest source of freshwater that is readily accessible for human use comes from:", options: ["Rivers and streams.", "Lakes.", "Ice and snow.", "Groundwater."], correctAnswer: "Groundwater." },
  { question: "Which activity is the most common example of a Non-Point Source of water pollution?", options: ["A factory discharge pipe.", "A municipal sewage treatment plant outlet.", "Agricultural runoff from a large farm field.", "A leaking oil storage tank."], correctAnswer: "Agricultural runoff from a large farm field." },
  { question: "Which definition best describes Rainwater Harvesting?", options: ["Diverting all rainwater into the ocean.", "Using groundwater for all water needs.", "The collection and storage of rainwater for later use.", "Artificially inducing rainfall through cloud seeding."], correctAnswer: "The collection and storage of rainwater for later use." },
  { question: "If a region has enough water but lacks the infrastructure to transport it and treat wastewater, leading to high levels of disease, this is an example of:", options: ["Physical water scarcity.", "Economic water scarcity.", "Drought.", "Water surplus."], correctAnswer: "Economic water scarcity." },
  { question: "Check dams are constructed on small streams to primarily achieve:", options: ["Generating hydroelectricity.", "Preventing soil erosion and increasing water infiltration.", "Creating permanent, deep-water lakes.", "Diverting water to a major canal."], correctAnswer: "Preventing soil erosion and increasing water infiltration." },
  { question: "What percentage of the Earth's total water is found in the oceans?", options: ["Around 20%.", "Around 50%.", "Around 97.25%.", "Around 5%."], correctAnswer: "Around 97.25%." },
  { question: "The mineral matter contained in wastewater (black water) is processed by the plants in a rain garden, where it becomes:", options: ["Polluting sludge that must be removed.", "Nutrients for the plants.", "Carbon dioxide released into the atmosphere.", "Sand and gravel."], correctAnswer: "Nutrients for the plants." },
  { question: "Which type of water body contains only about 0.0001% of the Earth's total water, despite being the most visible to humans?", options: ["Lakes.", "Groundwater.", "Rivers and streams.", "Biological water."], correctAnswer: "Rivers and streams." },
  { question: "Approximately what percentage of the Earth's total water is available as groundwater?", options: ["97.25%", "0.68%", "2.05%", "0.005%"], correctAnswer: "0.68%" }
];

// Lecture 30: Mineral and Energy Resources
const lecture3Data= [
  { question: "A mineral is defined as a naturally occurring, inorganic solid with a definite chemical composition and a definite:", options: ["Crystalline color.", "Magnetic field.", "Atomic arrangement.", "Density range."], correctAnswer: "Atomic arrangement." },
  { question: "Which term is used for a mineral that has economic importance because a metal can be extracted from it?", options: ["Compound.", "Element.", "Ore.", "Stock."], correctAnswer: "Ore." },
  { question: "Which of the following is an example of a non-renewable energy resource?", options: ["Geothermal energy.", "Petroleum (oil).", "Wind energy.", "Solar energy."], correctAnswer: "Petroleum (oil)." },
  { question: "The process of Nuclear Fission involves:", options: ["Combining light nuclei to form a heavier nucleus.", "Splitting a heavy nucleus (like Uranium) into two or more smaller nuclei.", "Using the sun's energy to generate electricity.", "Burning hydrocarbons to release heat."], correctAnswer: "Splitting a heavy nucleus (like Uranium) into two or more smaller nuclei." },
  { question: "Which environmental benefit, besides saving money, is achieved by using passive cooling techniques (like a rooftop green net and evaporative cooling) on buildings?", options: ["Increased land use for agriculture.", "Reduction in carbon dioxide (CO2) emissions from electricity generation.", "Increased air pollution.", "Depletion of water resources."], correctAnswer: "Reduction in carbon dioxide (CO2) emissions from electricity generation." },
  { question: "Which characteristic defines Renewable Energy Resources?", options: ["They are more expensive than non-renewable sources.", "They can only be used on a small scale.", "They are constantly being replenished by natural processes.", "They do not generate any form of pollution."], correctAnswer: "They are constantly being replenished by natural processes." },
  { question: "Which type of resource is Solar Energy?", options: ["Non-renewable.", "Exhaustible.", "Renewable (Inexhaustible).", "Stock."], correctAnswer: "Renewable (Inexhaustible)." },
  { question: "Which resource is commonly used as a fuel in nuclear fission reactors?", options: ["Hydrogen.", "Coal.", "Uranium.", "Methane."], correctAnswer: "Uranium." },
  { question: "The energy of the Sun originates from which process?", options: ["Nuclear Fission.", "Nuclear Fusion.", "Geothermal energy release.", "Chemical combustion."], correctAnswer: "Nuclear Fusion." },
  { question: "The concept that reducing your expenses on resources is inherently a way to help the planet is based on the idea that:", options: ["Money should be invested back into conservation funds.", "Less resource use leads to less environmental impact and pollution.", "All environmental problems are caused by financial mismanagement.", "Resource prices are directly linked to atmospheric CO2."], correctAnswer: "Less resource use leads to less environmental impact and pollution." },
  { question: "Which method is described in the lecture as a passive cooling option for buildings?", options: ["Installing a high-efficiency air conditioner.", "Using a geothermal heat pump.", "Roof top modification with a green net and evaporative cooling.", "Running the heating system at night."], correctAnswer: "Roof top modification with a green net and evaporative cooling." },
  { question: "Compared to low concentration ores (which are reserve resources), high concentration ores are usually categorized as:", options: ["Potential resources.", "Actual resources.", "Stock resources.", "Inexhaustible resources."], correctAnswer: "Actual resources." },
  { question: "Which of the following is not a defining characteristic of a mineral?", options: ["Naturally occurring.", "Inorganic solid.", "Definite chemical composition.", "Biologically derived."], correctAnswer: "Biologically derived." },
  { question: "The environmental problem associated with the use of coal as an energy source is primarily:", options: ["High costs of extraction.", "Depletion of the ozone layer.", "Release of large amounts of carbon dioxide (CO2).", "Increased tidal activity."], correctAnswer: "Release of large amounts of carbon dioxide (CO2)." },
  { question: "In the context of mineral extraction, a gangue is:", options: ["The valuable metal extracted from the ore.", "The worthless material mixed with the ore.", "A technique used for refining the mineral.", "The final product after purification."], correctAnswer: "The worthless material mixed with the ore." }
];

        let userAnswers = {
            extra: {},
            week: {},
            ai: {}
        };

        let currentLectureData = [];
        let currentQuestionOrder = {
            extra: [],
            week: [],
            ai: []
        };

        // Shuffle array function
        function shuffleArray(array) {
            let shuffled = [...array];
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }
            return shuffled;
        }

        // Initialize quiz - FIXED VERSION
        function initQuiz(quizData, containerId, quizType) {
            const container = document.getElementById(containerId);
            container.innerHTML = '';

            currentQuestionOrder[quizType] = Array.from({ length: quizData.length }, (_, i) => i);

            quizData.forEach((q, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'quiz-question';
                questionDiv.setAttribute('data-index', index);
                
                let optionsHTML = '';
                q.options.forEach((option) => {
                    // Escape quotes in the option text to prevent breaking the onclick
                    const escapedOption = option.replace(/'/g, "\\'").replace(/"/g, '&quot;');
                    optionsHTML += `
                        <div class="option" onclick="selectOption(this, '${quizType}', ${index}, '${escapedOption}')">
                            ${option}
                        </div>
                    `;
                });

                questionDiv.innerHTML = `
                    <div class="question-text">${index + 1}. ${q.question}</div>
                    <div class="options">
                        ${optionsHTML}
                    </div>
                `;

                container.appendChild(questionDiv);
            });
        }

        // Select option - FIXED VERSION
        function selectOption(element, quizType, questionIndex, answer) {
            // Check if quiz is already submitted
            const scoreDiv = document.getElementById(quizType + 'Score');
            if (scoreDiv.style.display === 'block') {
                return; // Don't allow selection after submission
            }

            const parentOptions = element.parentElement;
            const allOptions = parentOptions.querySelectorAll('.option');
            
            // Remove selected class from all options
            allOptions.forEach(opt => {
                opt.classList.remove('selected');
            });
            
            // Add selected class to clicked option
            element.classList.add('selected');

            // Store the answer
            userAnswers[quizType][questionIndex] = answer;
        }

        // Submit quiz
        function submitQuiz(quizType) {
            const quizData = quizType === 'extra' ? extraQuizData : (quizType === 'ai' ? currentLectureData : weekQuizData);
            const scoreDiv = document.getElementById(quizType + 'Score');
            
            let correct = 0;
            let total = quizData.length;

            quizData.forEach((q, index) => {
                const userAnswer = userAnswers[quizType][index];
                const questionDiv = document.querySelectorAll(`#${quizType}Quiz .quiz-question`)[index];
                const options = questionDiv.querySelectorAll('.option');

                options.forEach(opt => {
                    opt.style.pointerEvents = 'none';
                    
                    if (opt.textContent.trim() === q.correctAnswer) {
                        opt.classList.add('correct');
                    }
                    
                    if (opt.textContent.trim() === userAnswer && userAnswer !== q.correctAnswer) {
                        opt.classList.add('wrong');
                    }
                });

                if (userAnswer === q.correctAnswer) {
                    correct++;
                }
            });

            const percentage = ((correct / total) * 100).toFixed(1);
            scoreDiv.innerHTML = `
                <strong>Your Score: ${correct} / ${total}</strong><br>
                Percentage: ${percentage}%
            `;
            scoreDiv.style.display = 'block';
        }

        // Randomize quiz order - FIXED VERSION
        function randomizeQuiz(quizType) {
            const quizData = quizType === 'extra' ? extraQuizData : (quizType === 'ai' ? currentLectureData : weekQuizData);
            const container = document.getElementById(quizType + 'Quiz');
            
            // Shuffle the question order
            const shuffledOrder = shuffleArray(Array.from({ length: quizData.length }, (_, i) => i));
            currentQuestionOrder[quizType] = shuffledOrder;

            // Re-render questions in shuffled order
            container.innerHTML = '';
            shuffledOrder.forEach((originalIndex, displayIndex) => {
                const q = quizData[originalIndex];
                const questionDiv = document.createElement('div');
                questionDiv.className = 'quiz-question';
                questionDiv.setAttribute('data-original-index', originalIndex);
                
                let optionsHTML = '';
                q.options.forEach((option) => {
                    // Escape quotes properly
                    const escapedOption = option.replace(/'/g, "\\'").replace(/"/g, '&quot;');
                    optionsHTML += `
                        <div class="option" onclick="selectOption(this, '${quizType}', ${originalIndex}, '${escapedOption}')">
                            ${option}
                        </div>
                    `;
                });

                questionDiv.innerHTML = `
                    <div class="question-text">${displayIndex + 1}. ${q.question}</div>
                    <div class="options">
                        ${optionsHTML}
                    </div>
                `;

                container.appendChild(questionDiv);

                // Restore selected answer if exists
                if (userAnswers[quizType][originalIndex]) {
                    const options = questionDiv.querySelectorAll('.option');
                    options.forEach(opt => {
                        if (opt.textContent.trim() === userAnswers[quizType][originalIndex]) {
                            opt.classList.add('selected');
                        }
                    });
                }
            });

            // Hide score display
            document.getElementById(quizType + 'Score').style.display = 'none';
        }

        // Restart quiz
        function restartQuiz(quizType) {
            const quizData = quizType === 'extra' ? extraQuizData : (quizType === 'ai' ? currentLectureData : weekQuizData);
            
            userAnswers[quizType] = {};
            document.getElementById(quizType + 'Score').style.display = 'none';
            initQuiz(quizData, quizType + 'Quiz', quizType);
        }

        // Toggle accordion
        function toggleAccordion(header) {
            const content = header.nextElementSibling;
            const arrow = header.querySelector('.accordion-arrow');
            
            document.querySelectorAll('.accordion-content').forEach(c => {
                if (c !== content) {
                    c.classList.remove('active');
                }
            });
            
            document.querySelectorAll('.accordion-arrow').forEach(a => {
                if (a !== arrow) {
                    a.classList.remove('active');
                }
            });

            content.classList.toggle('active');
            arrow.classList.toggle('active');
        }

        // Load lecture quiz
        function loadLectureQuiz() {
            const lectureSelect = document.getElementById('lectureSelect');
            const selectedLecture = lectureSelect.value;
            
            if (!selectedLecture) {
                document.getElementById('aiQuiz').innerHTML = '';
                document.getElementById('aiButtonGroup').style.display = 'none';
                document.getElementById('aiScore').style.display = 'none';
                return;
            }

            if (selectedLecture === 'lecture1') {
                currentLectureData = lecture1Data;
            } else if (selectedLecture === 'lecture2') {
                currentLectureData = lecture2Data;
            } else if (selectedLecture === 'lecture3') {
                currentLectureData = lecture3Data;
            }

            userAnswers.ai = {};
            document.getElementById('aiScore').style.display = 'none';
            initQuiz(currentLectureData, 'aiQuiz', 'ai');
            document.getElementById('aiButtonGroup').style.display = 'flex';
        }

        // Open PDF in fullscreen
        function openPDFFullscreen() {
            const pdfViewer = document.getElementById('pdfViewer');
            const pdfSrc = pdfViewer.src;
            
            // Open PDF in new window/tab at full size
            window.open(pdfSrc, '_blank', 'width=' + screen.width + ',height=' + screen.height);
        }

        // Initialize quizzes on page load
        initQuiz(extraQuizData, 'extraQuiz', 'extra');
        initQuiz(weekQuizData, 'weekQuiz', 'week');
    </script>
</body>
</html>